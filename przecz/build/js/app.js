"use strict";var app=angular.module("app",[]);app.controller("appCtrl",["$scope","$interval",function(t,e){t.vars=[],t.stop=!1,t.nextCycle=function(){if(!t.vars.length)return t.play(),!1;t.started=!0;for(var e=0,n=t.vars.length;n>e;e++)functions.nextCycle(t.vars[e])},t.play=function(){t.stop?(e.cancel(t.stop),t.stop=!1):t.stop=e(function(){t.nextCycle()},1e3)},t.reset=function(){options.canvas.canvas.getContext("2d").clearRect(0,0,options.canvas.width,options.canvas.height),options.canvas.variableCount=0,t.vars=[],t.started=!1},t.containsObject=function(t,e){var n;for(n=0;n<e.length;n++)if(angular.equals(e[n],t))return!0;return!1},t.addVar=function(e){e&&(t.containsObject(t.customVar,t.vars)||(t.vars.push({name:t.customVar.name,value:!1,prevValue:!1,posX:0}),functions.initVariable(t.vars[t.vars.length-1])),t.customVar="")},t.download=function(t){var e=document.createElement("canvas"),n=e.getContext("2d");e.width=options.canvas.width,e.height=options.canvas.height,n.drawImage(options.grid.canvas,0,0),n.drawImage(options.canvas.canvas,0,0);var o=e.toDataURL("image/png");t.target.href=o,t.target.download="przebieg.png"}}]);var R={};!function(){function t(t,e){t.style.opacity=0,t.timeOutId=setTimeout(function(){t.parentNode.removeChild(t)},e)}R.options={closeButton:!1,newestOnTop:!1,positionClass:"assert-top-right",showDuration:5e3,hideDuration:800,hideEasing:"ease-in"},R.assert=function(e,n){var o=document.getElementById("results"),i=document.createElement("li"),a=document.createTextNode(n);null===o&&(o=document.createElement("ul"),o.className=R.options.positionClass,o.id="results",document.getElementsByTagName("body")[0].appendChild(o)),i.appendChild(a),i.className=e?"pass":"fail",i.style.transition=R.options.hideDuration+"ms opacity "+R.options.hideEasing,timeoutId=setTimeout(function(){t(i,R.options.hideDuration)},R.options.showDuration),R.addEvent(i,"click",function(){clearTimeout(timeoutId),t(i,R.options.hideDuration)},!1),R.options.newestOnTop?o.appendChild(i):o.insertBefore(i,o.firstChild)},R.createMenu=function(t){for(var e=document.getElementsByTagName("ul"),n=0;n<e.length;n++){var o=e[n].parentNode;if("LI"==o.nodeName){var i=document.createTextNode("+ ");o.firstChild.insertBefore(i,o.firstChild.childNodes[0]),o.className="node",e[n].style.display="none"}}var a=function(t){var e=t.target.parentNode,n=e.className;if(-1!=n.indexOf("node")){var o=e.childNodes[0].innerHTML,i=e.childNodes[2];i.style.display="none"==i.style.display?"block":"none",R.assert(!0,"a"),e.childNodes[0].innerHTML=-1!=o.indexOf("+")?o.replace("+","-"):o.replace("-","+"),t.preventDefault()}};document.getElementById("menu").addEventListener(t,a,!1)},R.addEvent=function(t,e,n,o){if(t.addEventListener)return t.addEventListener(e,n,o),!0;if(t.attachEvent){var i=t.attachEvent("on"+e,n);return i}alert("Handler could not be attached")},R.setAttributes=function(t,e){for(var n in e)t.setAttribute(n,e[n])},R.animate=function(t,e,n,o,i,a){if(t){var s=(new Date).getTime(),r=setInterval(function(){var d=Math.min(1,((new Date).getTime()-s)/o);t.style[e]=a+d*(n-a)+i,1==d&&clearInterval(r)},25);t.style[e]=a+i}}}();var options={},functions={};options.grid={canvas:document.getElementById("gridCanvas"),width:20,height:20},options.canvas={canvas:document.getElementById("mainCanvas"),width:1141,height:101,border:!0,variableCount:0,fontSize:.75*options.grid.height},window.onload=function(){functions.gridInit()},function(){var t=options.grid.canvas,e=(options.canvas.canvas,t.getContext("2d"));functions.gridInit=function(){var n;for(e.save(),t.width=options.canvas.width,t.height=options.canvas.height,e.fillStyle="#fff",e.fillRect(0,0,options.canvas.width,options.canvas.height),n=.5;n<options.canvas.width;n+=options.grid.width)e.moveTo(n,0),e.lineTo(n,options.canvas.height);for(n=.5;n<options.canvas.height;n+=options.grid.height)e.moveTo(0,n),e.lineTo(options.canvas.width,n);e.strokeStyle="#eee",e.stroke(),e.restore()}}(),function(){function t(){if(options.canvas.variableCount*options.grid.height*2>options.canvas.height){var t=document.createElement("canvas"),o=t.getContext("2d");t.width=e.width,t.height=e.height,o.drawImage(e,0,0),options.grid.canvas.getContext("2d").clearRect(0,0,options.grid.width,options.grid.height),options.canvas.height+=2*options.grid.height,functions.gridInit(),e.height=options.canvas.height,n.drawImage(t,0,0)}}var e=options.canvas.canvas,n=e.getContext("2d");e.width=options.canvas.width,e.height=options.canvas.height,functions.initVariable=function(e){options.canvas.variableCount++,t(),n.save(),n.font=options.canvas.fontSize+"px Calibri",n.textAlign="center",n.fillText(e.name,1.5*options.grid.width,options.canvas.variableCount*options.grid.height*2-.25*options.grid.height),e.startPosX=options.grid.width,e.startPosY=options.canvas.variableCount*options.grid.height*2,e.posX=e.startPosX+2*options.grid.width,e.posY=e.startPosY,n.strokeStyle="#33aa33",n.lineWidth=2,n.beginPath(),n.moveTo(e.startPosX,e.startPosY),n.lineTo(e.posX+1,e.posY),n.stroke(),n.restore()},functions.nextCycle=function(t){var e=options.canvas.canvas.getContext("2d");e.save(),t.newPosX=t.posX+options.grid.width,t.value===t.prevValue?(t.newPosY=t.posY,e.beginPath(),e.moveTo(t.posX,t.posY),e.lineTo(t.newPosX+1,t.newPosY)):t.value?(t.newPosY=t.posY-options.grid.height,e.beginPath(),e.moveTo(t.posX,t.posY),e.lineTo(t.posX,t.newPosY),e.lineTo(t.newPosX+1,t.newPosY)):(t.newPosY=t.posY+options.grid.height,e.beginPath(),e.moveTo(t.posX,t.posY),e.lineTo(t.posX,t.newPosY),e.lineTo(t.newPosX+1,t.newPosY)),e.strokeStyle="#33aa33",e.lineWidth=2,e.stroke(),e.restore(),t.prevValue=t.value,t.posX+=options.grid.width,t.posY=t.newPosY}}();